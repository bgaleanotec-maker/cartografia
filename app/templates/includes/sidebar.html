<div class="md:hidden flex items-center justify-between bg-gray-900 px-4 py-3 border-b border-gray-800">
    <div class="flex items-center">
        <i class="fas fa-map-marked-alt text-blue-500 mr-2 text-xl"></i>
        <span class="text-xl font-bold tracking-wider text-white">GESTOR<span class="text-blue-500">MAP</span></span>
    </div>
    <button id="mobile-menu-btn" class="text-gray-400 hover:text-white focus:outline-none">
        <i class="fas fa-bars text-2xl"></i>
    </button>
</div>

<!-- Mobile Sidebar (Off-canvas) -->
<div id="mobile-sidebar" class="fixed inset-0 z-40 hidden md:hidden">
    <!-- Overlay -->
    <div class="absolute inset-0 bg-gray-900/80 backdrop-blur-sm" onclick="toggleMobileMenu()"></div>

    <!-- Sidebar Content -->
    <div class="absolute inset-y-0 left-0 w-64 bg-gray-900 border-r border-gray-800 shadow-xl flex flex-col transform transition-transform duration-300 -translate-x-full"
        id="mobile-sidebar-panel">
        <div class="flex items-center justify-between h-16 px-4 bg-gray-900 border-b border-gray-800">
            <span class="text-xl font-bold tracking-wider text-white">Men√∫</span>
            <button onclick="toggleMobileMenu()" class="text-gray-400 hover:text-white">
                <i class="fas fa-times text-xl"></i>
            </button>
        </div>
        <div class="flex-1 overflow-y-auto py-4">
            {% include 'includes/nav_links.html' %}
        </div>
        <div class="p-4 border-t border-gray-800">
            <div class="flex items-center w-full">
                <div
                    class="h-8 w-8 rounded-full bg-gradient-to-r from-blue-500 to-emerald-500 flex items-center justify-center text-white font-bold">
                    {{ current_user.username[0].upper() }}
                </div>
                <div class="ml-3">
                    <p class="text-sm font-medium text-white">{{ current_user.username }}</p>
                    <p class="text-xs text-gray-400 capitalize">{{ current_user.role }}</p>
                </div>
                <a href="{{ url_for('auth.logout') }}" class="ml-auto text-gray-400 hover:text-white">
                    <i class="fas fa-sign-out-alt"></i>
                </a>
            </div>
        </div>
    </div>
</div>

<!-- Desktop Sidebar -->
<div class="hidden md:flex md:flex-shrink-0 w-64 flex-col glass-card border-r border-gray-700/50">
    <div class="flex items-center h-16 flex-shrink-0 px-4 bg-gray-900/50">
        <i class="fas fa-map-marked-alt text-blue-500 mr-2 text-xl"></i>
        <span class="text-xl font-bold tracking-wider text-white">GESTOR<span class="text-blue-500">MAP</span></span>
    </div>
    <div class="flex-1 flex flex-col overflow-y-auto">
        <nav class="flex-1 px-2 py-4 space-y-2">
            {% include 'includes/nav_links.html' %}
        </nav>
    </div>
    <div class="flex-shrink-0 flex bg-gray-900/50 p-4 border-t border-gray-700/50">
        <div class="flex items-center w-full">
            <div
                class="h-8 w-8 rounded-full bg-gradient-to-r from-blue-500 to-emerald-500 flex items-center justify-center text-white font-bold">
                {{ current_user.username[0].upper() }}
            </div>
            <div class="ml-3">
                <p class="text-sm font-medium text-white">{{ current_user.username }}</p>
                <p class="text-xs text-gray-400 capitalize">{{ current_user.role }}</p>
            </div>
            <a href="{{ url_for('auth.logout') }}" class="ml-auto text-gray-400 hover:text-white">
                <i class="fas fa-sign-out-alt"></i>
            </a>
        </div>
    </div>
</div>

<script>
    const btn = document.getElementById('mobile-menu-btn');
    const sidebar = document.getElementById('mobile-sidebar');
    const panel = document.getElementById('mobile-sidebar-panel');

    function toggleMobileMenu() {
        if (sidebar.classList.contains('hidden')) {
            sidebar.classList.remove('hidden');
            // Small delay to allow transition
            setTimeout(() => {
                panel.classList.remove('-translate-x-full');
            }, 10);
        } else {
            panel.classList.add('-translate-x-full');
            setTimeout(() => {
                sidebar.classList.add('hidden');
            }, 300);
        }
    }

    if (btn) btn.addEventListener('click', toggleMobileMenu);
</script>